name: 'Pytest Coverage Comment'
description: 'Comments a pull request with the pytest code coverage badge and full report'
author: 'Misha Kav'
branding:
  icon: 'message-circle'
  color: 'blue'
inputs:
  github-token:
    description: 'GitHub API Access Token'
    default: ${{ github.token }}
    required: true
  pytest-coverage-path:
    description: 'The location of the txt output of pytest-coverage'
    default: './pytest-coverage.txt'
    required: false
  title:
    description: 'Title for the coverage report. Useful for monorepo projects'
    default: 'Coverage Report'
    required: false
  badge-title:
    description: 'Title for the badge icon'
    default: 'Coverage'
    required: false
  hide-badge:
    description: 'Hide badge with percentage'
    default: 'false'
    required: false
  hide-report:
    description: 'Hide coverage report'
    default: 'false'
    required: false
  hide-comment:
    description: 'Hide the whole comment (use when you need only `output`)'
    default: 'false'
    required: false
  junitxml-path:
    description: 'The location of the junitxml path'
    default: ''
    required: false
  junitxml-title:
    description: 'Title for summary for junitxml'
    default: ''
    required: false
  create-new-comment:
    description: 'When false, will update the same comment, otherwise will publish new comment on each run'
    default: 'false'
    required: false
  multiple-files:
    description: > 
      You can pass array of titles and files to generate single comment with table of results. 
      Single line should look like `Title, ./path/to/pytest-coverage.txt, ./path/to/pytest.xml`
      example: 
        My Title 1, ./data/pytest-coverage_3.txt, ./data/pytest_1.xml
    default: ''
    required: false
outputs:
  coverage:
    description: 'value indicating the coverage percentage of your report based on pytest, example 30%'
  color:
    description: 'color of coverage report'
runs:
  using: 'node12'
  main: 'dist/index.js'
